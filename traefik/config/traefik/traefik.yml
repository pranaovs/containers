global:
  sendAnonymousUsage: true

api:
  dashboard: true
  insecure: true
  debug: false

entryPoints:
  web:
    address: ":80"
    observability:
      accessLogs: false
    proxyProtocol:
      trustedIPs:
        - "127.0.0.1/32" # Localhost from nginx
        - "10.0.0.0/8" # Podman gateway range
        - "100.64.0.0/10" # Tailscale IP Range

  websecure:
    address: ":443"
    proxyProtocol:
      trustedIPs:
        - "127.0.0.1/32" # Localhost from nginx
        - "10.0.0.0/8" # Podman gateway range

    http:
      tls:
        certResolver: le
      middlewares:
        - crowdsec@docker

serversTransport:
  insecureSkipVerify: true

providers:
  docker:
    exposedByDefault: false
    endpoint: "unix:///var/run/docker.sock"

certificatesResolvers:
  le:
    acme:
      storage: /letsencrypt/acme.json
      httpChallenge:
        entryPoint: web

log:
  level: INFO # can be DEBUG, INFO, WARN, ERROR
  format: common # or json
  filePath: "" # empty means stdout

accessLog:
  format: common # or json
  # bufferingSize: 0 # disable buffering, send directly to stdout
  filePath: /var/log/traefik/access-raw.log

experimental:
  plugins:
    crowdsec-bouncer:
      moduleName: "github.com/maxlerebourg/crowdsec-bouncer-traefik-plugin"
      version: "v1.4.7"
